<!--YOUR TASKS WILL APPEAR HERE
~			TODO
~	Set up the main window
~	Set up the multi window interface that we need
~	Make sure the form works
~	Get the console going
~	Make it all look nice
~ 	Import font awesome
-->
<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>WebIDE</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" href="easyui/themes/default/easyui.css">
	<script type="text/javascript" src="easyui/jquery.min.js"></script>
	<script type="text/javascript" src="easyui/jquery.easyui.min.js"></script>
    <script src="codemirror-5.44.0/lib/codemirror.js"></script>
    <link rel="stylesheet" href="codemirror-5.44.0/lib/codemirror.css">
    <script src="codemirror-5.44.0/mode/javascript/javascript.js"></script>
</head>
<body class="easyui-layout">
    <div data-options="region:'north',border:false" style="height:50px;background:#B3DFDA;padding:10px">
        <button class="topButton" id="runButton" onclick="runCode()" type="button">Run</button> <!-- form submission stuff -->
        <form style="display: none" name="runForm" action="#" th:action="@{/code}" th:object="${code}" method="post" target="hiddenFrame">
            <input type="text" th:field="*{code}" />
            <input type="text" th:field="*{request}"/>
        </form>
        <button class="topButton" id="saveButton" onclick="saveCode()" type="button">Save</button>
        <!-- <button class="topButton" id="debugButton">Debug</button> -->
        <button class="topButton" id="newButton">New</button>
        <button class="topButton" id="openButton">Open</button>
        <!-- <button class="topButton" id="compileButton">Compile</button> -->
        <form action="#" th:action="@{/logout}" method="post">
            <button class="topRightButton" id="logoutButton" name="Log Out">LogOut</button>
        </form>
    </div>
    <div data-options="region:'south',title:'Console',split:true" style="height:300px;">
        <iframe name="hiddenFrame" width="100%" height="100%" ></iframe>
    </div>
    <!-- <div data-options="region:'west',title:'Files',split:true" style="width:200px;">file stuff</div> -->
    <div data-options="region:'center',title:'Code'" style="padding:5px;background:#eee;">
        <textarea id="codewindow" class="codemirror-textarea" style="width:100%;height:100%;resize:vertical;overflow:auto !important"></textarea>

                    <!-- <textarea id="mainWritingWindow" placeholder="<Insert amazing code here>" style="height:575px;width:1690px;"> --> <!-- need to fix text window area -->
                    <!-- </textarea> -->

        <form></form> <!--main code writing window/console-->

    </div>
</body>
<script>
    var tc = null;
    var realedit = null;
    $(document).ready(function(){
        var code = $(".codemirror-textarea")[0];
        var editor = CodeMirror.fromTextArea(document.getElementById("codewindow"), {
            lineNumbers : true,
            mode:  "text/x-java",
            matchBrackets: true
        });
        editor.getDoc().setValue(' public class Main {\n' +
            '   public static void main(String[] args) {\n' +
            '\t\tSystem.out.println("Hello World!");\n' +
            '   }\n' +
            ' }');
        realedit = editor;
        tc = editor.getValue();

    });

    function runCode() {
        tc = realedit.getValue();
        document.forms["runForm"].elements.code.value = tc;
        document.forms["runForm"].elements.request.value = "run" ;
        document.forms["runForm"].submit();  //do same thing for request
    }

    function saveCode() {
        tc = realedit.getValue();
        document.forms["runForm"].elements.code.value = tc;
        document.forms["runForm"].elements.request.value = "save" ;
        document.forms["runForm"].submit();  //do same thing for request
    }

</script>

<style>
    .CodeMirror {
        border: 1px solid #eee;
        height: auto;
    }
	html {
		margin: 0;
		height: 100;
		font-family: monospace;
		color: black;
	}
	body {
		display: grid;
		grid-template-columns: 75px, auto;
		grid-template-rows: 50px, auto;
		grid-template-areas:
				"ribbon ribbon"
				"sidenav main";
	}
	.topButton {
		background-color: rgb(189, 179, 179);
		font-family: monospace;
		border-radius: 5px;
		font-size: 18px;
		border-width: 5px;
		border-style: outset;
		outline:none;
	}
	.topButton:active {
		transition: all, 450ms, ease;
		border-color: green;
		background-color: green;
		border-style:inset;
		color: white;
	}
	.topRightButton {
		background-color: rgb(189, 179, 179);
		font-family: monospace;
		border-radius: 5px;
		font-size: 18px;
		border-width: 5px;
		border-style: outset;
		outline:none;
		position:absolute;
		top:13px;
		right:13px;
	}
	.topRightButton:active {
		transition: all, 450ms, ease;
		border-color: green;
		background-color: green;
		border-style:inset;
		color: white;
	}
	.sidenav {
		grid-area: sidenav;
		border-color: black;
		border-width: 5px;
		border-style: solid;

	}
	.ribbon {
		grid-area: ribbon;
		border-color: black;
		border-width: 5px;
		border-style: solid;
	}
	.main {
		grid-area: main;
		border-color: black;
		border-width: 5px;
		border-style: solid;
		width: auto;
		height: auto;
	}
	#mainWritingWindow {
		font-family: monospace;
		color: black;
		font-size: 14px;
		border-color: blue;
		border-style: solid;
		border-width: 5px;
		height: 60%;
		width: 90%;
		resize: none;
	}

</style>
</html>